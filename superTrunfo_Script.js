var carta1 = {
    nome: "Mú de Áries",
    imagem: "https://pm1.narvii.com/6400/89ba68085c0ed6a79f4b14f335c05492311428a8_hq.jpg",
    atributos: {
      Ataque: 8,
      Defesa: 10,
      Resistência: 8,
      Cosmo: 8,
      Conhecimentos: 9
    }
  };
  
  var carta2 = {
    nome: "Aldebaran de Touro",
    imagem: "https://i.pinimg.com/originals/60/52/e2/6052e2288f6a1a2bc6ed460ff2c012ac.png",
    atributos: {
      Ataque: 8,
      Defesa: 5,
      Resistência: 9,
      Cosmo: 7,
      Conhecimentos: 7
    }
  };
  
  var carta3 = {
    nome: "Saga de Gêmeos",
    imagem: "https://omaringa.com.br/wp-content/uploads/2021/11/saga-2.jpg",
    atributos: {
      Ataque: 10,
      Defesa: 7,
      Resistência: 10,
      Cosmo: 9,
      Conhecimentos: 9
    }
  };

  var carta4 = {
    nome: "Máscara da Morte de Câncer",
    imagem: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRfKk8XHX5NH5iJAEaRhcL7xRj0iNpC1kenIw&usqp=CAU",
    atributos: {
      Ataque: 6,
      Defesa: 4,
      Resistência: 6,
      Cosmo: 7,
      Conhecimentos: 6
    }
  };
  
  var carta5 = {
    nome: "Aioria de Leão",
    imagem: "http://pm1.narvii.com/6885/5a6a4204d55c8736142c87d7031590038a3e219er1-480-480v2_00.jpg",
    atributos: {
      Ataque: 9,
      Defesa: 7,
      Resistência: 8,
      Cosmo: 8,
      Conhecimentos: 5
    }
  };
  
  var carta6 = {
    nome: "Shaka de Virgem",
    imagem: "http://bp3.blogger.com/_JgK7QpRWVJM/SJHdTU0_vWI/AAAAAAAAAcg/6UP6gor43t4/s400/shaka.bmp",
    atributos: {
      Ataque: 9,
      Defesa: 10,
      Resistência: 8,
      Cosmo: 10,
      Conhecimentos: 8
    }
  };

  var carta7 = {
    nome: "Dohko de Libra",
    imagem: "https://sm.ign.com/ign_br/screenshot/default/captura-de-tela-199_fa3k.png",
    atributos: {
      Ataque: 8,
      Defesa: 10,
      Resistência: 9,
      Cosmo: 9,
      Conhecimentos: 10
    }
  };

  var carta8 = {
    nome: "Miro de Escorpião",
    imagem: "https://fenixdourado.files.wordpress.com/2011/10/tech-milo-scarletneedle1.jpg?w=584",
    atributos: {
      Ataque: 8,
      Defesa: 7,
      Resistência: 6,
      Cosmo: 7,
      Conhecimentos: 7
    }
  };

  var carta9 = {
    nome: "Aioros de Sagitário",
    imagem: "https://pm1.narvii.com/6867/392b5d747df88a35bc5b41bdca1c930ae0922e76r1-443-332v2_hq.jpg",
    atributos: {
      Ataque: 9,
      Defesa: 7,
      Resistência: 9,
      Cosmo: 9,
      Conhecimentos: 10
    }
  };

  var carta10 = {
    nome: "Shura de Capricórnio",
    imagem: "https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/f85b51c4-c36e-438a-8f26-6ee5f27f6093/d8csuzs-26f2f060-2e69-4b3e-b98c-057180a2be76.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcL2Y4NWI1MWM0LWMzNmUtNDM4YS04ZjI2LTZlZTVmMjdmNjA5M1wvZDhjc3V6cy0yNmYyZjA2MC0yZTY5LTRiM2UtYjk4Yy0wNTcxODBhMmJlNzYuanBnIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.Bu3pCI-A2iRSCj_3AJNhSSS51JlkONUWSvg6RTXd25A",
    atributos: {
      Ataque: 8,
      Defesa: 7,
      Resistência: 8,
      Cosmo: 7,
      Conhecimentos: 6
    }
  };

  var carta11 = {
    nome: "Camus de Aquário",
    imagem: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQbW2WXWkPgSk_BEJMTsvWs5UE4Y-3K3x9JgBHMK3bXwsIf3mQZ10F8nOM1L4E5--FMxRc&usqp=CAU",
    atributos: {
      Ataque: 8,
      Defesa: 6,
      Resistência: 7,
      Cosmo: 7,
      Conhecimentos: 8
    }
  };

  var carta12 = {
    nome: "Afrodite de Peixes",
    imagem: "https://pm1.narvii.com/6719/460e81ee8aeb47bbad9070eedc215fc71222b049_hq.jpg",
    atributos: {
      Ataque: 6,
      Defesa: 5,
      Resistência: 6,
      Cosmo: 6,
      Conhecimentos: 7
    }
  };

  var cartaOculta = {
    nome: "???",
    imagem: "https://i.pinimg.com/736x/d3/ff/50/d3ff5055dcced901eda0bf9f82362aa2.jpg",
    atributos: {
      Ataque: "???",
      Defesa: "???",
      Resistência: "???",
      Cosmo: "???",
      Conhecimentos: "???"
    }
  };
  
  var superTrunfo = [carta1, carta2, carta3, carta4, carta5, carta6, carta7, carta8, carta9, carta10, carta11, carta12]
  
  var cartas = [];
  var cartasJ = [];

  for(var i=0; i<6;i++){
    var distribuiCarta = parseInt(Math.random() * superTrunfo.length)
    let cartaParaMaoDoJogador = superTrunfo.splice(distribuiCarta, 1)
    cartasJ.push(cartaParaMaoDoJogador.pop())
}

cartas = superTrunfo

console.log('cartas do jogador:', cartasJ)
console.log('\ncartas da máquina:', cartas)

  var cartaMaquina;
  var cartaJogador;

  var sorteio = {
    numeroCartaMaquina(){
      return sortearCartaMaquina = parseInt(Math.random() * cartas.length)
    },
    numeroCartaJogador(){
      return sortearCartaJogador = parseInt(Math.random() * cartasJ.length)
    }
  }

  var divMaoJogador = document.getElementById("mao-jogador")
  var tagHTMLMaoJogador = "<div class='mao-jogador' id='mao-jogador'>"

  var nomes = ''

  for(var card=0; card<cartasJ.length; card++){
    
    //console.log(' Carta', card+1, ':', cartasJ[card].nome, ' | atributos:', cartasJ[card].atributos)
    
    var cartaAtual = cartasJ[card]
    var moldura = '<img src="https://www.alura.com.br/assets/img/imersoes/dev-2021/card-super-trunfo-transparent.png" style=" width: inherit; height: inherit; position: absolute;">'

    var opcoesAtrib = ''
    for(var nomeAtributos in cartaAtual.atributos){
      opcoesAtrib += "<p name='nomeAtributos' value='" + nomeAtributos + "'> " + nomeAtributos + ": "+ cartaAtual.atributos[nomeAtributos] + "<br>"
    }
    nomes += "<p>"+ "Nome: " + cartaAtual.nome  + opcoesAtrib + "<br>" 
    
    divMaoJogador.innerHTML = tagHTMLMaoJogador + "<u>Suas cartas:</u>" + "<br>" + nomes + "<br>" + "<button class='btn__ok' type='button' id='btnOk' onclick='Ok()'>ok</button>" + "</div>"
  }
  
  document.getElementById("btnSortear").disabled = true;

  function Ok(){
    //divMaoJogador.innerHTML = null
    document.getElementById("mao-jogador").style.display = "none"; // ou "block"
    document.getElementById("carta-jogador").style.display = "flex";
    document.getElementById("carta-maquina").style.display = "flex";
    document.getElementById("h2").style.display = "block";
    document.getElementById("btnSortear").disabled = false;
  //alert("Alert!!")
}

function sortearCarta() {
  //divMaoJogador.innerHTML = null
  
  cartaMaquina = cartas[sorteio.numeroCartaMaquina()];
  cartaJogador = cartasJ[sorteio.numeroCartaJogador()];

    document.getElementById("btnSortear").disabled = true;
    document.getElementById("btnJogar").disabled = false;
  
    exibirCartaJogador()
    exibirCartaEmBranco()
    var divResultado = document.getElementById("resultado");
    divResultado.innerHTML = null
  }
  
  function obtemAtributoSelecionado() {
    var radioAtributos = document.getElementsByName("atributo");
  
    for (var i = 0; i < radioAtributos.length; i++) {
      if (radioAtributos[i].checked == true) {
        return radioAtributos[i].value;
      }
    }
  }
  
  function jogar() {
    var atributoSelecionado = obtemAtributoSelecionado();
    var divResultado = document.getElementById("resultado");
    
    if (cartaJogador.atributos[atributoSelecionado] > cartaMaquina.atributos[atributoSelecionado]) {
      let cartaConquistadaPeloJogador = cartas.splice(sortearCartaMaquina, 1)
      cartasJ.push(cartaConquistadaPeloJogador.pop())
      htmlResultado = "<p class='resultado-final'>Venceu</p>";
      var elementoCartasMaquina = document.getElementById('cartas-Máquina')
      elementoCartasMaquina.innerHTML = 'Cartas da Máquina: ' + cartas.length
      var elementoCartasJogador = document.getElementById('cartas-Jogador')
      elementoCartasJogador.innerHTML = 'Cartas do Jogador: ' + cartasJ.length
    } else if (cartaMaquina.atributos[atributoSelecionado] > cartaJogador.atributos[atributoSelecionado]) {
      let cartaConquistadaPelaMaquina = cartasJ.splice(sortearCartaJogador, 1)
      cartas.push(cartaConquistadaPelaMaquina.pop())
      htmlResultado = "<p class='resultado-final'>Perdeu</p>"
      var elementoCartasMaquina = document.getElementById('cartas-Máquina')
      elementoCartasMaquina.innerHTML = 'Cartas da Máquina: ' + cartas.length
      var elementoCartasJogador = document.getElementById('cartas-Jogador')
      elementoCartasJogador.innerHTML = 'Cartas do Jogador: ' + cartasJ.length
    } else {
      htmlResultado = "<p class='resultado-final'>Empatou</p>"
      var elementoCartasMaquina = document.getElementById('cartas-Máquina')
      elementoCartasMaquina.innerHTML = 'Cartas da Máquina: ' + cartas.length
      var elementoCartasJogador = document.getElementById('cartas-Jogador')
      elementoCartasJogador.innerHTML = 'Cartas do Jogador: ' + cartasJ.length
    }
    divResultado.innerHTML = htmlResultado
    
    exibirCartaMaquina()

    if(cartas == '') {
      htmlResultado = "<p class='resultado-final'>PARABÉNS, VOCÊ VENCEU!</p>";
      divResultado.innerHTML = htmlResultado
      document.getElementById("btnJogar").disabled = true;
      document.getElementById("btnSortear").disabled = true;

      var elementoNovoJogo = document.getElementById("novo-jogo")
      htmlNovoJogo = "<button class='novo-jogo' type='button' onclick='recarregarAPagina()'>Jogar de novo</button>";
      elementoNovoJogo.innerHTML = htmlNovoJogo
      
    } else if(cartasJ == '') {
      htmlResultado = "<p class='resultado-final'>FIM DE JOGO, VOCÊ PERDEU!</p>";
      divResultado.innerHTML = htmlResultado
      document.getElementById("btnJogar").disabled = true;
      document.getElementById("btnSortear").disabled = true;
      
      var elementoNovoJogo = document.getElementById("novo-jogo")
      htmlNovoJogo = "<button class='novo-jogo' type='button' onclick='recarregarAPagina()'>Jogar de novo</button>";
      elementoNovoJogo.innerHTML = htmlNovoJogo

    } else {
      document.getElementById("btnJogar").disabled = true;
      document.getElementById("btnSortear").disabled = false;
    }
  }
  
  function exibirCartaJogador(){
    var divCartaJogador = document.getElementById("carta-jogador")
    divCartaJogador.style.backgroundImage = `url(${cartaJogador.imagem})`
    var moldura = '<img src="https://www.alura.com.br/assets/img/imersoes/dev-2021/card-super-trunfo-transparent.png" style=" width: inherit; height: inherit; position: absolute;">'
    var tagHTML = "<div id= 'opcoes' class='carta-status'>"
    
    var opcoesTexto = ""
    for (var atributo in cartaJogador.atributos) {
      opcoesTexto +=
        "<input type='radio' name='atributo' value='" +
        atributo +
        "'>" +
        atributo + ": " + cartaJogador.atributos[atributo] + "<br>";
    }
    var nome = `<p class="carta-subtitle">${cartaJogador.nome}</p>`
    
    divCartaJogador.innerHTML = moldura + nome + tagHTML + opcoesTexto + "</div>"
  }
  
  function exibirCartaMaquina(){
    var divCartaMaquina = document.getElementById("carta-maquina")
    divCartaMaquina.style.backgroundImage = `url(${cartaMaquina.imagem})`
    var moldura = '<img src="https://www.alura.com.br/assets/img/imersoes/dev-2021/card-super-trunfo-transparent.png" style=" width: inherit; height: inherit; position: absolute;">'
    var tagHTML = "<div id= 'opcoes' class='carta-status'>"
    
    var opcoesTexto = ""
    for (var atributo in cartaMaquina.atributos) {
      opcoesTexto +=
        "<p type='radio' name='atributo' value='" +
        atributo +
        "'>" +
        atributo + ": " + cartaMaquina.atributos[atributo] + "</p>";
    }
    var nome = `<p class="carta-subtitle">${cartaMaquina.nome}</p>`
    
    divCartaMaquina.innerHTML = moldura + nome + tagHTML + opcoesTexto + "</div>"
  }
  
  function exibirCartaEmBranco(){
    var divCartaMaquina = document.getElementById("carta-maquina")
    divCartaMaquina.style.backgroundImage = `url(${cartaOculta.imagem})`
    var moldura = '<img src="https://www.alura.com.br/assets/img/imersoes/dev-2021/card-super-trunfo-transparent.png" style=" width: inherit; height: inherit; position: absolute;">'
    var tagHTML = "<div id= 'opcoes' class='carta-status'>"
    
    var opcoesTexto = ""
    for (var atributo in cartaOculta.atributos) {
      opcoesTexto +=
       "<p type='radio' name='atributo' value='" +
      atributo +
      "'>" +
      atributo + ": " + cartaOculta.atributos[atributo] + "</p>";
    }
    var nome = `<p class="carta-subtitle">${cartaOculta.nome}</p>`
    
    divCartaMaquina.innerHTML = moldura + nome + tagHTML + opcoesTexto + "</div>"
  }
  
  function recarregarAPagina(){
    window.location.reload();
}